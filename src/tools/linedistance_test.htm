<!DOCTYPE html>
<head></head>
<body>
	<canvas id="main" width="300" height="300" style="background:#000;"></canvas>
	<div id="position"></div>
	<script>
	var canvas = document.getElementById('main');
	var position = document.getElementById('position');
	var context = canvas.getContext('2d');
	var i, start, x0, y0, x1, y1, x2, y2, tolerance;
	var lines = [];

	function createMegaArray(count) {
		for (var i = 0; i < count; i++) {
			lines.push([[Math.random()*300, Math.random()*300], [Math.random()*300, Math.random()*300]]);
		}
	}
	
	function canvasMouseHandler(e) {
		start = (new Date()).getTime();
		x0 = e.offsetX;
		y0 = e.offsetY;
		position.innerText = 'x: ' + x0 + ', y:' + y0;
		for (i = 0, len = lines.length; i < len; i++) {
			x1 = lines[i][0][0];
			y1 = lines[i][0][1];
			x2 = lines[i][1][0];
			y2 = lines[i][1][1];
			switch ((y2 - y1) / (x2 - x1)) {
				case 1/0:
					if (x0 < x1 + tolerance &&
						x0 > x1 - tolerance &&
						y0 > Math.min(y1, y2) - tolerance &&
						y0 < Math.max(y1, y2) + tolerance) {
							console.log('Found one with a vertical line!');
					}
					break;
				case 0:
					if (x0 > Math.min(x1, x2) - tolerance &&
						x0 < Math.max(x1, x2) + tolerance &&
						y0 > y1 - tolerance &&
						y0 < y1 + tolerance) {
							console.log('Found one with a horizontal line!');
					}
					break;
				default:
					if (x0 > Math.min(x1, x2) - tolerance ||
						x0 < Math.max(x1, x2) + tolerance ||
						y0 > Math.min(y1, y2) - tolerance ||
						y0 < Math.max(y1, y2) + tolerance) {
							if (Math.abs((y2 - y1) * x0 - (x2 - x1) * y0 + x2 * y1 - y2 * x1) /
								Math.sqrt(Math.pow(y2 - y1, 2) + Math.pow(x2 - x1, 2)) < tolerance) {
								console.log('Found one within tolerance!');
							}
					}
			}
		}

		console.log('duration: ' + ((new Date()).getTime() - start) + 'ms');
	}

	canvas.addEventListener('mousemove', canvasMouseHandler, false);
	</script>
</body>